<% provide(:title, 'Add new user') %>
<h1>Add new user</h1>
<%= form_for [:admin, @user] do |f|  %>
    <div class="row well span11">
      <%= render 'shared/error_messages', object: f.object %>
      <div class="row span4">
        <div class="control-group">
          <%= f.label :name %>
          <%= f.text_field :name, class: "form-control" %>
        </div>
        <div class="control-group">
          <%= f.label :email %>
          <%= f.text_field :email, class: "form-control", type: "email" %>
        </div>
        <div class="control-group">
          <%= f.label :birth_date %>
          <%= f.date_select :birth_date,value:  (f.object.birth_date.strftime('%d/%m/%Y') if f.object.birth_date),
                            order: [:month, :day, :year],'data-behaviour'=> 'datepicker', class: "datepicker form-control", size: 50 %>
        </div>
      </div>
      <div class="row span6">
        <div class="control-group">
          <%= f.label :password %>
          <%= f.password_field :password , class: "form-control"%>
        </div>
        <div class="control-group">
          <%= f.label :password_confirmation, "Confirm Password"%>
          <%= f.password_field :password_confirmation, class: "form-control" %>
        </div>
        <div class="control-group">
          <%= f.label :profile%>
          <%= f.text_area :profile, class: "form-control" %>
        </div>
        <div class="control-group">
          <div class="btn-group" data-toggle="buttons-radio" >
            <%= f.radio_button :permission,2, id: "first", style: "display:none;" %>
            <label for="first" class="btn btn-info">Admin</label>
            <%= f.radio_button :permission,1, id: "second", style: "display:none;" %>
            <label for="second" class="btn btn-danger">Member</label>
          </div>
        </div>
        <div class="control-group">
          <label>Skills</label>
          <div class="form-control">
            <table class="table table-striped">
              <thead>
              <tr>
                <th>Add</th>
                <th>ID</th>
                <th>Name</th>
                <th>Level</th>
                <th>Used Year Number</th>
              </tr>
              </thead>
              <tbody>
              <%= f.fields_for :user_skills do |builder| %>
                  <tr>
                    <td><%= builder.check_box :checked_skill %></td>
                    <td>
                      <%= builder.object.skill.id %>
                      <%= builder.hidden_field :skill_id, value: builder.object.skill.id %>
                    </td>
                    <td><%= builder.object.skill.name %></td>
                    <td><%= builder.text_field :level %></td>
                    <td><%= builder.text_field :used_year_number%></td>
                  </tr>
              <% end %>
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <%= f.submit "Add user", class: " controls btn btn btn-success" %>
    </div>
<% end %>
<script type="text/javascript">
    $('.datepicker').datepicker();
</script>
